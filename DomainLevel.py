import enum
import tldextract

class DomainLevel(enum.Enum):
    NORMAL = 0
    SUB_TLD = 1
    DOM_TLD = 2
    SUB_DOM = 3
    DOM_SUB = 4

    def translate(self, domain):
        if self == DomainLevel.NORMAL:
            return domain.lower().replace('.', '')
        exd = tldextract.extract(domain.lower())
        if self == DomainLevel.SUB_TLD:
            return exd.domain.replace('.', '') + exd.suffix.replace('.', '')
        if self == DomainLevel.DOM_TLD:
            return exd.subdomain.replace('.', '') + exd.suffix.replace('.', '')
        if self == DomainLevel.SUB_DOM:
            return exd.subdomain.replace('.', '') + exd.domain.replace('.', '')
        if self == DomainLevel.DOM_SUB:
            return exd.domain.replace('.', '') + exd.subdomain.replace('.', '')

    @staticmethod
    def parse(s):
        if s.lower() == 'NORMAL':
            return DomainLevel.NORMAL
        if s.lower() == 'SUB_TLD':
            return DomainLevel.SUB_TLD
        if s.lower() == 'DOM_TLD':
            return DomainLevel.DOM_TLD
        if s.lower() == 'SUB_DOM':
            return DomainLevel.SUB_DOM
        if s.lower() == 'DOM_SUB':
            return DomainLevel.DOM_SUB
        raise 'Undefined domain level'