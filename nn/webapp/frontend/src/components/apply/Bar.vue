
<template>
  <div id="apply-bar">
    <table class="center">
      <tbody>
        <tr>
          <td>
            <div class="row">
              <input
                type="range"
                :min="bounds.min"
                :max="bounds.max"
                step=1
                v-on:change="$emit('bar-changed', fields)"
                v-model.number="fields.th"
              />
              <input type="text" style="width:50px"
                v-on:change="$emit('bar-changed', fields)"
                v-model.number="fields.th"
              />
            </div>
          </td>
          <td>
            campionamento:
            <div class="row">
              <input
                type="range"
                :min="5"
                :max="100"
                :step="5"
                v-on:change="$emit('bar-changed', fields)"
                v-model.number="fields.sampling"
              />
              <input type="text" style="width:50px"
                v-on:change="$emit('bar-changed', fields)"
                v-model.number="fields.sampling"
              />
            </div>
          </td>
          <td>
            <div class="row">
              DGAS
              
              <button v-for="dga in [1,2,3]" :key="`btn_dga_${dga}`"
                :class="{ active: dgas[dga] }"
                v-on:click="change_dga(dga)" >
                {{ dga }}
              </button>
            </div>
          </td>
          <td>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</template>

<script>

export default {
  name: "ApplyBar",
  model: {
    prop: 'fields',
    event: 'change'
  },
  props: {
    fields: {
      type: Object,
      default: function () {
        return { th: 50, sampling: 100, dgas: { 1: true, 2: true, 3: true }}
      }
      // th: {
      //   type: Number,
      //   default: 50
      // },
      // sampling: {
      //   type: Number,
      //   default: 100
      // },
      // dgas: {
      //   1: {
      //     type: Boolean,
      //     default: true
      //   },
      //   2: {
      //     type: Boolean,
      //     default: true
      //   },
      //   3: {
      //     type: Boolean,
      //     default: true
      //   }
      // },

    }
  },
  data: function () {
    return {
      th: 50,
      sampling: 100,
      dgas: { 1: true, 2: true, 3: true },
      bounds: {
        min: 0, max: 100
      },
    };
  },
  methods: {
    change_dga(dga) {
      this.dgas[dga] = !this.dgas[dga];
      if (Object.values(this.dgas).reduce((v, t) => v+t, 0) === 0) {
        this.dgas[dga] = !this.dgas[dga];
      }
    },
  }
};
</script>

<style .scoped>
.active {
  background-color: lightskyblue;
}
</style>