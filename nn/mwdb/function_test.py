




from function_f import function_f
from function_l import function_l
from function_p import function_p
from function_s import function_s
from utils import ApplyConfiguration

import os
import pandas as pd

if __name__ == "__main__":

    nth = 50

    th2s = [ 0.25, 0.75 ]
    
    configs = [
        ApplyConfiguration(name='test1', model_id=7, wtype='llr', top10m=(0,0), wsize=500, windowing='both', inf=(-80, 80)),
        ApplyConfiguration(name='test1', model_id=7, wtype='llr', top10m=(1000, -50), wsize=500, windowing='both', inf=(-80, 80)),
    ]

    metricss = []
    for config in configs:

        _path = f'/tmp/{config.__hash__()}.csv'
        if os.path.exists(_path):
            df_f = pd.read_csv(_path)
        else:
            df_f = function_f(config)
            df_f.to_csv(_path)
        
        cms_ths = function_l(df_f, nth)

        metricss.append(function_p(cms_ths, th2s))

        pass

    compare = function_s(configs, metricss, [ 0 ], [ 'tn2+tp2', 0.75 ], 'top10m')

    pass