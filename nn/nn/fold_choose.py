import json
import pprint as pp
import pandas as pd
import shutil

p = pp.PrettyPrinter(indent=2)

aa = []

for i in range(1,9):
    with open(f'fold_{i}_infos.json', 'r') as f:
        j = json.load(f)
    best_epoch = j['best_epoch'] - 1
    
    a = j['history']['loss'][best_epoch]
    b = j['history']['binary_accuracy'][best_epoch]
    c = j['history']['val_loss'][best_epoch]
    d = j['history']['val_binary_accuracy'][best_epoch]

    aa.append([ a, b, c, d, (a + c) /2, (b + d) / 2 , best_epoch ])

df = pd.DataFrame(aa, columns=['loss', 'binary_accuracy', 'val_loss', 'val_binary_accuracy', 'avg_loss', 'avg_acc', 'best_epoch' ])

df.index = df.index + 1
print(df)

print(df.idxmax())

print('\n\nWhich fold do you choose?')
choice = input()
fold = int(choice)

print('\n\nWhich epoch do you choose?')
choice = input()
epoch = int(choice)

print(f'Which name for fold {fold}?')
name = input()

input_dir = f'./fold_{fold}/model_{best_epoch}'
output_dir = f'/home/michelle/Repo/nns/nns/{name}/'
shutil.copytree(input_dir, output_dir)