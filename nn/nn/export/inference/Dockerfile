FROM tensorflow/tensorflow

RUN apt install -y git

RUN /usr/bin/python3 -m pip install --upgrade pip

RUN mkdir /app

COPY requirements.txt /app/requirements.txt
RUN pip install -r /app/requirements.txt

RUN git clone --branch dicter https://github.com/princio/pslregex.git /app/pslregex
RUN pip install /app/pslregex/
RUN pslregex-init

COPY inference2.py /app/inference.py

ADD ./nns /app/nns

WORKDIR /app

ENTRYPOINT [ "python",  "/app/inference.py" ]
CMD [ "messages_76.csv", "dn", "icann" ]