var express = require('express');
var router = express.Router();
const { Client } = require('pg');
const { ModelRepository, DatasetRepository, ReportRepository } = require('../data/repository');


/* GET home page. */
router.get('/', async function(req, res, next) {
  const client = new Client()
  await client.connect();
  
  const models = await ModelRepository.fetchall(client);
  const datasets = await DatasetRepository.fetchall(client);
  const reports = await ReportRepository.fetchall(client);

  console.log(reports.length);
  
  res.render('bo', { title: 'Test', models, datasets, reports });

  await client.end();
});

module.exports = router;
