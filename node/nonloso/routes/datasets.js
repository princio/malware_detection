var express = require('express');
var router = express.Router();

const csv = require('csv-parser')
const fs = require('fs')
const results = [];
 

/* GET home page. */
router.get('/:type/:name', function(req, res, next) {

    fs.createReadStream(`/home/princio/Desktop/malware_detection/datasets/${req.params.type}_h_t/${req.params.name}`)
    .pipe(csv())
    .on('data', (data) => results.push(data))
    .on('end', () => {
        console.log(results[0]);
    });

    res.render('dataset', { title: 'Dataset', name: `${req.params.type}/${req.params.name}`, dataset: results });
});

module.exports = router;
