#! /bin/sh

echo "Run only from containing directory!"

case "$1" in
    start)
        docker run -it --mount type=bind,source="$(pwd)"/output/,target=/trainer/output --rm --runtime=nvidia  malware_detection:0.01
        ;;
    build)
        docker build --tag malware_detection:0.01 "$(pwd)"
        ;;
    restart)
        docker build --tag malware_detection:0.01 "$(pwd)"
        docker run -u $(id -u):$(id -g) --network="host" -it \
                --mount type=bind,source="$(pwd)"/captures/,target=/trainer/captures \
                --mount type=bind,source="$(pwd)"/predictions/,target=/trainer/predictions \
                --mount type=bind,source="$(pwd)"/models/,target=/trainer/models \
                --rm --runtime=nvidia  malware_detection:0.01
        ;;
esac
