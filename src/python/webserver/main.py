from flask import Flask
from flask import request
from flask import send_from_directory
from windowed import get_html, get_bounds
from flask_cors import CORS
import json


app = Flask(__name__)
CORS(app)


@app.route('/df', methods=['POST'])
def windowed():
    ths = request.json['ths']
    body = get_html(request.json['size'], request.json['dga_gt'], request.json['dga'], request.json['th_measure'], ths, request.json['fxs'])
    return json.dumps(body)


@app.route('/jsons/file.json')
def send_json():
    return send_from_directory('.jsons/', 'file.json', as_attachment=False)


@app.route('/df/bounds', methods=['GET'])
def bounds():
    return json.dumps(get_bounds(json=True))


if __name__ == "__main__":
    app.run(port=3000, debug=False)