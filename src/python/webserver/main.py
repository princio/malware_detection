from flask import Flask
from flask import request
from windowed import get_html, get_json
from flask_cors import CORS

app = Flask(__name__)
CORS(app)


@app.route("/df/windowed")
def df_windowed() -> str:
    return "Hello World"


@app.route('/df/windowed/html', methods=['POST'])
def windowed():
    print(request.json)
    cfs = request.json['cfs']
    for th in cfs:
        cfs[th] = float(cfs[th])
    return get_html(request.json['size'], request.json['dga_gt'], request.json['dga'], request.json['th_measure'], cfs, request.json['fxs'])


if __name__ == "__main__":
    app.run(port=3000, debug=False)